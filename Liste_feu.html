<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liste du Feu</title>
    <link rel="stylesheet" href="assets/css/liste.css">
    <style>
        :root {
            --hover-bg: #fff3e0;
            --clicked-bg: #ff5722;
            --accent: #ff5722;
        }

        .diagram-container {
            background: white;
            padding: 14px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-width: 1300px;
            margin: 0 auto;
            position: relative;
            overflow: visible;
            box-sizing: border-box;
        }

        .level {
            display: grid;
            grid-template-columns: repeat(8, minmax(0, 1fr));
            gap: 16px;
            margin: 7px 0;
            min-height: 28px;
            position: relative;
            align-items: center;
            width: 100%;
            box-sizing: border-box;
        }

        .level-number {
            position: absolute;
            left: -30px;
            top: 50%;
            transform: translateY(-50%);
            background: white;
            border: 2px solid #000;
            border-radius: 4px;
            padding: 1px 4px;
            font-weight: bold;
            font-size: 12px;
        }

        .spell-node {
            background: white;
            border: 2px solid #000;
            border-radius: 6px;
            padding: 3px 6px;
            margin: 0;
            text-align: center;
            font-size: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            min-width: 80px;
            max-width: 100%;
            z-index: 5;
            justify-self: start;
            box-sizing: border-box;
        }

        .spell-node:hover {
            background-color: #fff3e0;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(255, 87, 34, 0.3);
        }

        .spell-node.clicked {
            background-color: #ff5722;
            color: white;
        }

        .arrow {
            position: absolute;
            background: #000;
            z-index: 1;
            transform-origin: left center;
        }

        .arrow::after {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 8px solid #000;
            right: -6px;
            top: 50%;
            transform: translateY(-50%);
        }

        .arrow-vertical {
            width: 2px;
        }

        .arrow-diagonal {
            width: 2px;
        }

        .arrow-horizontal {
            height: 2px;
        }

        .arrow-horizontal::after {
            border-left: 8px solid #000;
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
            border-right: none;
            right: -8px;
            top: 50%;
            transform: translateY(-50%);
        }

        .connection-line {
            position: absolute;
            background: #000;
            z-index: 1;
        }

        .connection-line::after {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 8px solid #000;
            right: -6px;
            top: 50%;
            transform: translateY(-50%);
        }

        .diagram-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            pointer-events: none;
            overflow: visible;
        }

        h1 {
            text-align: center;
            color: #000;
            margin-bottom: 15px;
            font-size: 24px;
        }

        .spell-info {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border: 2px solid #000;
            border-radius: 8px;
            padding: 15px;
            max-width: 300px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 1000;
        }

        .spell-info h3 {
            margin: 0 0 10px 0;
            color: #ff5722;
        }

        .spell-info p {
            margin: 5px 0;
            font-size: 14px;
        }

        #spellDescription {
            text-align: justify;
        }

        /* Classes de positionnement par colonne */
        .col-1 {
            grid-column: 1;
        }

        .col-2 {
            grid-column: 2;
        }

        .col-3 {
            grid-column: 3;
        }

        .col-4 {
            grid-column: 4;
        }

        .col-5 {
            grid-column: 5;
        }

        .col-6 {
            grid-column: 6;
        }

        .col-7 {
            grid-column: 7;
        }

        .col-8 {
            grid-column: 8;
        }

        .col-2-3 {
            grid-column: 2 / 4;
        }

        /* Améliorations visuelles */
        .diagram-container {
            padding: 20px;
            border-radius: 14px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
            background: #fff;
        }

        .level {
            gap: 132px;
            margin: 13px 0;
            min-height: 39px;
        }

        .level-number {
            background: linear-gradient(180deg, #ffffff, #fdf3ed);
            border: 1px solid rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            padding: 3px 6px;
            font-size: 12px;
        }

        .spell-node {
            background: linear-gradient(180deg, #ffffff 0%, #fff7f1 100%);
            border: 1px solid rgba(0, 0, 0, 0.12);
            border-radius: 10px;
            padding: 6px 8px;
            margin: 0;
            font-size: 12px;
            min-width: 120px;
            max-width: 100%;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
            justify-self: start;
            box-sizing: border-box;
        }

        .spell-node:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 18px rgba(255, 87, 34, 0.25);
        }
    </style>
</head>

<body>
    <h1>LISTE DU FEU</h1>


    <div class="diagram-container" id="diagramContainer">

        <!-- Niveau 1 -->
        <div class="level" style="margin-top: 0;">
            <div class="level-number">1</div>
            <div class="spell-node col-4" data-spell="Chauffer">Chauffer</div>
        </div>

        <!-- Niveau 2 -->
        <div class="level">
            <div class="level-number">2</div>
            <div class="spell-node col-2" data-spell="Altération des feux">Altération des feux</div>
            <div class="spell-node col-4" data-spell="Mains brûlantes">Mains brûlantes</div>
        </div>

        <!-- Niveau 3 -->
        <div class="level">
            <div class="level-number">3</div>
            <div class="spell-node col-1" data-spell="Ebullition des liquides">Ebullition des liquides</div>
            <div class="spell-node col-3" data-spell="Ignition">Ignition</div>
            <div class="spell-node col-4" data-spell="Flèches de feu">Flèches de feu</div>
            <div class="spell-node col-5" data-spell="Colère">Colère</div>
            <div class="spell-node col-7" data-spell="Rideau de feu">Rideau de feu</div>
        </div>

        <!-- Niveau 4 -->
        <div class="level">
            <div class="level-number">4</div>
            <div class="spell-node col-2" data-spell="Pyrotechnie">Pyrotechnie</div>
            <div class="spell-node col-4" data-spell="Flamme">Flamme</div>
            <div class="spell-node col-6" data-spell="Piège à feu">Piège à feu</div>
        </div>

        <!-- Niveau 5 -->
        <div class="level">
            <div class="level-number">5</div>
            <div class="spell-node col-1" data-spell="Echauffement des solides">Echauffement des solides</div>
            <div class="spell-node col-2" data-spell="Feu charmeur">Feu charmeur</div>
            <div class="spell-node col-4" data-spell="Eclair de feu">Eclair de feu</div>
            <div class="spell-node col-5" data-spell="Frénésie">Frénésie</div>
            <div class="spell-node col-7" data-spell="Résistance au feu">Résistance au feu</div>
        </div>

        <!-- Niveau 6 -->
        <div class="level">
            <div class="level-number">6</div>
            <div class="spell-node col-1" data-spell="Métal brûlant">Métal brûlant</div>
            <div class="spell-node col-3" data-spell="Extinction">Extinction</div>
            <div class="spell-node col-4" data-spell="Boule de feu">Boule de feu</div>
            <div class="spell-node col-6" data-spell="Epée de feu">Epée de feu</div>
            
        </div>

        <!-- Niveau 7 -->
        <div class="level">
            <div class="level-number">7</div>
            <div class="spell-node col-4" data-spell="Graines de feu">Graines de feu</div>
            <div class="spell-node col-7" data-spell="Sphère de feu">Sphère de feu</div>
        </div>

        <!-- Niveau 8 -->
        <div class="level">
            <div class="level-number">8</div>
            <div class="spell-node col-2" data-spell="Elémental de feu">Elémental de feu</div>
        </div>

        <!-- Niveau 9 -->
        <div class="level">
            <div class="level-number">9</div>
            <div class="spell-node col-2" data-spell="Être de feu">Être de feu</div>
            <div class="spell-node col-7" data-spell="Bouclier de feu">Bouclier de feu</div>
        </div>

        <!-- Niveau 10 -->
        <div class="level">
            <div class="level-number">10</div>
            <div class="spell-node col-4" data-spell="Tempête de feu">Tempête de feu</div>
        </div>

        <!-- Niveau 12 -->
        <div class="level">
            <div class="level-number">12</div>
            <div class="spell-node col-3" data-spell="Contrôle des feux">Contrôle des feux</div>
            <div class="spell-node col-7" data-spell="Globe anti-feu">Globe anti-feu</div>
        </div>

        <!-- Niveau 15 -->
        <div class="level">
            <div class="level-number">15</div>
            <div class="spell-node col-4" data-spell="Nuée de météores">Nuée de météores</div>
        </div>
    </div>
    <div class="spell-info" id="spellInfo">
        <h3><span id="spellName"></span> (niv <span id="spellLevel"></span>)</h3>
        <table>
            <tr>
                <td><strong>Portée :</strong></td>
                <td><span id="spellPortée"></span></td>
            </tr>
            <tr>
                <td><strong>Incantation :</strong></td>
                <td><span id="spellIncantation"></span></td>
            </tr>
        </table>
        <table>
            <tr>
                <td><strong>Durée :</strong></td>
                <td><span id="spellDurée"></span></td>
            </tr>
            <tr>
                <td><strong>Sauvegarde :</strong></td>
                <td><span id="spellSauvegarde"></span></td>
            </tr>
            <tr>
                <td><strong>Zone :</strong></td>
                <td><span id="spellZone"></span></td>
            </tr>
        </table>
        <p id="spellDescription"></p>
    </div>

    <script>
        // Données de la Liste du Feu
        const spellsData = {
            // Niveau 1
            "Chauffer": {
                level: 1,
                portée: "-",
                incantation: "2 s",
                durée: "2 h",
                sauvegarde: "-",
                zone: "boule de 3m *",
                description: "Ce sort permet d'élever la température de l'air à l'intérieur de la zone d'effet. Le magicien décide une fois pour toute au début du sort de la température qu'il régnera ; celle-ci peut aller de la température naturelle à environ 40 degrés Celsius. La zone d'effets se déplace ensuite avec le magicien.\nNotez que tout autre sort affectant la température occulte celui-ci (mais ne le dissipe pas)."
            },

            // Niveau 2
            "Altération des feux": {
                level: 2,
                portée: "5 m",
                incantation: "2 s",
                durée: "30 s",
                sauvegarde: "-",
                zone: "un feu (jusqu'à 1m3)",
                description: "Le feu ciblé par le sortilège gagne soudain en intensité ou au contraire se réduit, au choix du magicien. Le magicien fixe la nouvelle intensité du feu dans un facteur au maximum de 10 (c'est-à-dire jusqu'à au maximum 10 fois plus ou 10 fois moins) par rapport à son intensité initiale. Ainsi la flamme d'une torche pourra être transformée temporairement en un brasier de 2 mètres de haut, comme en une petite flamme fatiguée de bougie.\nSi le sortilège accentue ou ralentit magiquement la vitesse de combustion, celle-ci consomme pour autant du combustible proportionnellement à sa nouvelle intensité. La quantité de combustible doit par conséquent être suffisante pour soutenir l'intensité de feu choisie par le magicien."
            },
            "Mains brûlantes": {
                level: 2,
                portée: "-",
                incantation: "2 s",
                durée: "1 min",
                sauvegarde: "-",
                zone: "le magicien",
                description: "Grâce à ce sortilège, le magicien fait partir des flammes de ses doigts en éventail. Ces flammes sont longues d'environ un mètre, et peuvent enflammer ce qu'elles touchent durant 1 ou 2 secondes. S'il s'agit d'une créature, celle-ci perd 2 points de vie (par tour), en raison des brûlures qu'elles lui causent. Il est cependant assez difficile de toucher un adversaire avec une arme aussi lente et c'est pourquoi ce sort est surtout utilisé pour maintenir des personnes à une distance suffisante pour les empêcher d'attaquer."
            },

            // Niveau 3
            "Ebullition des liquides": {
                level: 3,
                portée: "5 m",
                incantation: "5 s",
                durée: "temps de refroidir",
                sauvegarde: "-",
                zone: "3 m3",
                description: "Ce sort porte presque instantanément (en 5 secondes d'incantation) tout liquide contenu dans la zone d'effets à une température de 100 degrés Celsius, c'est à dire à la température d'ébullition de l'eau.\nLe retour à la température ambiante se fait ensuite naturellement. En particulier, il est peu efficace de lancer ce sort sur une rivière, car la chaleur se transmettra rapidement et l'eau retrouvera vite sa température normale.\nUne restriction de taille est cependant à noter : il est impossible de choisir une zone d'effets contenant un être vivant. Ses émissions d'ondes magiques troubleraient en effet trop le sort.\nNotez également qu'exceptionnellement le magicien peut agrandir la zone d'effets au-delà d'un triplement : la zone d'effets peut être agrandie d'1 mètre cube par point (de fatigue et de concentration) supplémentaire dépensé, avec pour seule limite les forces que le magicien peut ou veut consacrer à son sort."
            },
            "Ignition": {
                level: 3,
                portée: "20 m",
                incantation: "2 s",
                durée: "-",
                sauvegarde: "- (Mag)",
                zone: "boule de 20cm",
                description: "Tout matériau inflammable se trouvant à moins de 20 cm du point choisi par le magicien prend feu. Cela inclut bois, vêtements ou cheveux par exemple. Pour des vêtements portés par une créature ou pour ses cheveux, cependant, la proximité de celle-ci perturbe les ondes magiques, et peut faire échouer le sort. Elle bénéficie donc d'un jet de sauvegarde sous son don Magie, afin d'éviter les effets du sort."
            },
            "Flèches de feu": {
                level: 3,
                portée: "-",
                incantation: "5 s",
                durée: "5 min",
                sauvegarde: "-",
                zone: "le magicien",
                description: "Pendant la durée du sort, tout projectile inflammable (flèche, carreau d'arbalète, etc.) touché par le magicien prend feu. Ce feu est sans danger pour l'utilisateur du projectile, mais reprend ses propriétés dès que celui-ci est utilisé.\nUn projectile enchanté de cette façon inflige 2 points de dégât supplémentaires et peut enflammer ce qu'il atteint."
            },
            "Colère": {
                level: 3,
                portée: "10 m",
                incantation: "3 s",
                durée: "1 min",
                sauvegarde: "V+2",
                zone: "1 créature",
                description: "La créature victime de l'enchantement devient brusquement énervée et trouve un prétexte, même futile, pour se mettre en colère, n'hésitant pas à se quereller, même avec ses amis. Les paroles d'apaisement ont sur elle l'effet l'inverse et suscite son ire envers celui ou celle qui cherche ainsi à lui dire comment se comporter. A la fin du sortilège elle retrouve son calme et se rend compte qu'elle s'est clairement emportée d'une manière totalement excessive.\nCet état d'énervement n'abolit pas entièrement pour autant la capacité de jugement de la créature atteinte par l'enchantement. Elle sera par exemple capable de se battre normalement si cela est nécessaire, tout comme de fuir si elle est confrontée à un danger trop important."
            },
            "Rideau de feu": {
                level: 3,
                portée: "3 m",
                incantation: "2 s",
                durée: "5 min",
                sauvegarde: "-",
                zone: "8m x 3m",
                description: "Ce sort crée un mur fixe de flammes intenses et ondulantes. Il est large de 30 cm et le magicien peut lui donner au choix une forme plate (mur) ou circulaire (cylindre) s'il le place autour de lui-même. La vue du feu dissuadera les animaux de le franchir.\nToute créature le traversant se voit infliger des brûlures superficielles, et risque de voir ses vêtements et ses cheveux s'enflammer. Elle perd 1d3+1 points de vie, sans sauvegarde.\nLe rideau se crée progressivement pendant les 2 secondes que dure l'incantation. Si une créature se trouve à l'endroit où le magicien décide de le positionner, elle a ainsi le temps de s'en écarter avant qu'il n'ait acquis sa pleine vigueur."
            },

            // Niveau 4
            "Pyrotechnie": {
                level: 4,
                portée: "30 m",
                incantation: "10 s",
                durée: "1 min",
                sauvegarde: "-",
                zone: "boule de 30m",
                description: "Grâce à ce sortilège, le magicien peut manipuler à son gré les feux naturels se trouvant à l'intérieur de la zone d'effets. Leur intensité et leur taille ne sont pas fixées définitivement lors du lancement du sort ; le magicien peut faire varier ces paramètres à tout instant, pour chaque feu de façon différente, dans la seule limite d'un facteur 5 par rapport aux caractéristiques initiales des feux.\nSans danger supplémentaire que celui de feux naturels, ce sort peut néanmoins se révéler extrêmement impressionnant s'il est bien utilisé."
            },
            "Flamme": {
                level: 4,
                portée: "-",
                incantation: "1 s",
                durée: "2 h",
                sauvegarde: "-",
                zone: "le magicien",
                description: "Ce sort crée une flamme magique d'une dizaine de centimètres dans la main du magicien. Il peut l'utiliser comme une torche pour s'éclairer ou pour enflammer des objets. L'eau ou le froid ne l'affecte pas. Le magicien la fait disparaître quand il ferme la main, et réapparaître quand il la rouvre. S'il tient un objet serré (comme une épée par exemple), la flamme reste en veilleuse, comme si sa main était fermée."
            },
            "Piège à feu": {
                level: 4,
                portée: "toucher",
                incantation: "1 min",
                durée: "1 an",
                sauvegarde: "-",
                zone: "un objet",
                description: "Ce sort permet au magicien de piéger un objet. Il se déclenche dès qu'une personne autre que lui le touche.\nL'énergie magique placée dans l'objet se libère alors, créant un souffle de feu de courte portée, mais suffisant pour atteindre l'importun.\nLes dégâts subis sont de 2d4 points de vie, sans sauvegarde possible."
            },

            // Niveau 5
            "Echauffement des solides": {
                level: 5,
                portée: "10 m",
                incantation: "5 s",
                durée: "temps de refroidir",
                sauvegarde: "-",
                zone: "2 m3",
                description: "Tout objet solide dans la zone d'effets du sort devient extrêmement chaud, d'une température de l'ordre de 80 degrés Celsius. Le contact avec un tel objet est très douloureux, et les créatures les tenant devront les lâcher ; sinon, elles perdent trois points de vie par tour dans chaque zone en contact avec un tel objet.\nCe sort affecte tout objet, même l'épée tenue par un combattant, à l'exception unique des vêtements ou armures (ou d'un objet situé encore plus près du corps), qui sont protégés par l'émission d'ondes magiques par la créature concernée (lesquelles perturbent trop le sortilège pour qu'il fonctionne correctement).\nL'échauffement est progressif pendant le temps d'incantation. La vitesse de refroidissement dépend ensuite énormément du matériau constituant l'objet et de la température ambiante. Le métal se refroidira vite (une trentaine de secondes pour une épée), la pierre ou le bois beaucoup moins (jusqu'à plusieurs dizaines de minutes).\nComme pour le sort d'Ebullition des liquides, le magicien peut agrandir la zone d'effets au-delà d'un triplement. L'augmentation est de 0,5 mètre cube supplémentaire par point (de fatigue et de concentration) supplémentaire dépensé."
            },
            "Feu charmeur": {
                level: 5,
                portée: "10 m",
                incantation: "10 s",
                durée: "2 min",
                sauvegarde: "NM",
                zone: "toute créature regardant le feu",
                description: "Pour lancer ce sort, le magicien doit disposer d'un feu d'au minimum 10 cm de rayon. Ses incantations ont pour effet de faire grandir et onduler les flammes, les rendant hypnotiques pour quiconque les a dans son champ de vision et n'est pas déjà engagé dans une action importante requérant toute son attention (comme un combat).\nLes créatures ratant leur sauvegarde deviennent alors paisibles et amicales. Elles perdent presque conscience de ce qui se passe autour d'elles et regardent les flammes, fascinées. Elles considèrent le magicien comme un ami et répondent donc a priori à ses questions. Elles peuvent se rendre compte qu'on va les attaquer (jet de sixième sens éventuel si c'est par derrière), mais c'est la seule chose qui peut les tirer de leur torpeur.\nAprès 2 minutes, elles reprennent peu à peu leurs esprits, sans avoir conscience de la cause de leur rêverie. Si elles sont blessées avant ce délai, cependant, elles s'éveillent subitement, en colère contre leur agresseur."
            },
            "Eclair de feu": {
                level: 5,
                portée: "-",
                incantation: "3 s",
                durée: "-",
                sauvegarde: "Co+2",
                zone: "un éclair de 30m de long",
                description: "Un souffle de flammes jaillit des mains du magicien au moment où le sort prend effet, et brûle ce qu'il rencontre sur son passage. Les matériaux facilement inflammables prennent feu et les créatures subissent de graves brûlures. Elles perdent 3d4 points de vie, moins la marge de réussite de leur sauvegarde.\nLes créatures situées sur les 10 premiers mètres du parcours de l'éclair subissent un malus de -2 à leur jet de sauvegarde. A contrario, une créature partiellement protégée du souffle (par un muret, un compagnon plus grand, etc.) bénéficie d'un bonus de +2 à +8 à sa sauvegarde, selon l'importance de la protection offerte.\nLe fait de tenter une sauvegarde est équivalent à une esquive : la créature concernée se jette sur le côté pour tenter d'éviter l'explosion. Cela interrompt donc toute action en cours.\nEn outre, le choc de l'explosion crée un effet d'hébétude chez ceux qui le subissent, qui empêche d'agir pendant quelques secondes. Les créatures ayant réussi leur sauvegarde perdent 2 secondes à se remettre du choc, ce qui peut leur faire perdre l'initiative ou retarder leur attaque en combat. Les créatures ayant raté leur sauvegarde perdent un tour complet sans agir et subissent un malus de -2 à leurs actions éventuelles de défense (parades ou esquives) durant ce tour."
            },
            "Frénésie": {
                level: 5,
                portée: "15 m",
                incantation: "3 s",
                durée: "1 min",
                sauvegarde: "Mag",
                zone: "1 créature",
                description: "Si elle est engagée dans un combat, la créature affectée par cet enchantement est transportée par une fureur destructrice confinant à la rage. L'énergie extraordinaire qu'elle déploie lui confère un bonus de +2 à toutes ses actions de combat au contact (attaque avec une arme de mêlée, parade, esquive) au prix toutefois de doubler sa fatigue (dépense de 2 points de fatigue par tour au lieu d'un seul). Elle bénéficie également d'un bonus de 2 points à son initiative ainsi que d'un effet équivalent à celui de l'avantage Résistance à la douleur (non cumulable toutefois le cas échéant avec ce dernier).\nSa frénésie pousse la créature affectée à se battre préférentiellement au contact de ses adversaires. Si elle souhaite utiliser plutôt une arme à distance ou un sortilège (excepté un sortilège à réalité physique occasionnant des dégâts directs de masse), elle doit auparavant réussir un jet sous sa Volonté.\nPar ailleurs, elle cherchera à poursuivre le combat jusqu'à la fin du sortilège ou jusqu'à l'élimination de la totalité de ses adversaires. Si elle souhaite s'abstenir (par exemple s'enfuir, ou proposer la reddition à un adversaire en sous-nombre), elle doit réussir un jet sous sa Volonté pour y parvenir. Le maître du jeu peut appliquer à ce jet un bonus ou un malus en fonction des circonstances.\nLe magicien peut choisir de lancer ce sortilège sur lui-même, auquel cas il est automatiquement affecté sans avoir à effectuer de jet de sauvegarde."
            },
            "Résistance au feu": {
                level: 5,
                portée: "toucher",
                incantation: "5 s",
                durée: "1 heure",
                sauvegarde: "-",
                zone: "1 créature",
                description: "La créature bénéficiant du sort devient insensible aux feux naturels.\nDe plus, pendant toute la durée du sort, elle bénéficie d'un bonus de +2 à ses sauvegardes contre les sorts fondés sur le feu et ces sorts ne lui infligent que la moitié des dégâts normaux, avant sauvegarde éventuelle (les sorts infligeant 1 point de vie par tour infligeront seulement 1 point de vie tous les 2 tours)."
            },

            // Niveau 6
            "Métal brûlant": {
                level: 6,
                portée: "15 m",
                incantation: "4 s",
                durée: "1 min",
                sauvegarde: "- (Mag+2)",
                zone: "un objet en métal",
                description: "La température de l'objet visé par le magicien augmente très rapidement (2 degrés par seconde). Au bout d'une minute, elle se met à décroître au même rythme. Pour que le sort fonctionne, le poids de l'objet ne doit pas excéder 30 kg.\nLe contact avec l'objet devient très vite douloureux, et inflige des dommages dès 60 degrés. Les dégâts pour chaque zone en contact avec lui, par tour, sont égaux au nombre de dizaine de degrés de la température au-delà de 60 : 1 point de vie de 60 à 69 degrés, 2 de 70 à 79, etc.\nBien sûr, lancé sur l'armure d'un adversaire, ce sort peut être particulièrement redoutable. Il est cependant difficile d'affecter un objet se trouvant à moins de 20 cm d'une créature intelligente car celle-ci émet des ondes magiques interférant avec le sortilège. Pour cette raison, chaque créature à moins de 20 cm de l'objet ciblé lance un jet de sauvegarde sous son don Magie + 2 ; une réussite annule les effets du sort. Les créatures situées à plus de 20 cm de l'objet au moment du lancement du sort n'ont en revanche aucune sauvegarde."
            },
            "Extinction": {
                level: 6,
                portée: "-",
                incantation: "7 s",
                durée: "-",
                sauvegarde: "-",
                zone: "boule de 1 km",
                description: "Ce sort éteint instantanément tous les feux naturels dans la zone d'effets, à l'exception de ceux spécifiquement choisis par le magicien.\nNotez cependant que des obstacles gênent la progression des ondes magiques et donc réduisent la zone d'action du sort. Le franchissement d'un mur (si par exemple le sort est lancé depuis la pièce d'une habitation) divise par exemple par 3 la portée restante. Ainsi, ce sortilège sera par exemple capable d'éteindre tous les feux brûlant dans un manoir si le magicien est à l'intérieur ou tous les feux d'un petit quartier si le magicien est dans la rue."
            },
            "Epée de feu": {
                level: 6,
                portée: "-",
                incantation: "5 s",
                durée: "30 min",
                sauvegarde: "-",
                zone: "-",
                description: "Ce sortilège crée une épée constituée de feu maintenu et renforcée d'ondes magiques. Cette épée peut être utilisée par le magicien comme une épée normale (compétence « Epée à 1 main »), notamment en combat. Elle provoque des dégâts équivalents à ceux d'une épée longue (l'éventuel bonus de force s'applique), auxquels s'ajoute 2 points de dommage supplémentaires liés à sa chaleur. Elle peut en outre enflammer les objets inflammables avec lesquels elle reste en contact, de la même façon qu'une torche.\nSeul le magicien lui-même peut utiliser cette épée de feu. Les autres créatures ne sont pas en mesure de la contrôler."
            },
            "Boule de feu": {
                level: 6,
                portée: "30 m",
                incantation: "4 s",
                durée: "-",
                sauvegarde: "Co",
                zone: "boule de 3 m",
                description: "Ce sort crée une petite boule qui explose brutalement. Le magicien la déplace mentalement, de sorte qu'elle explose là où il le désire. Le déplacement est extrêmement rapide, ce qui rend difficile de se protéger de l'explosion.\nToute créature se trouvant dans la zone d'effets est brûlée par le souffle et perd 3d4+1 points de vie, moins la marge de réussite de sa sauvegarde. Les créatures situées le plus près du cœur de l'explosion (à moins de 1 mètre) subissent un malus de -2 à leur jet de sauvegarde. Les matériaux facilement inflammables prennent feu.\nLe fait de tenter une sauvegarde est équivalent à une esquive : la créature concernée se jette sur le côté pour tenter d'éviter l'explosion. Cela interrompt donc toute action en cours.\nEn outre, le choc de l'explosion crée un effet d'hébétude chez ceux qui le subissent, qui empêche d'agir pendant quelques secondes. Les créatures ayant réussi leur sauvegarde perdent 2 secondes à se remettre du choc, ce qui peut leur faire perdre l'initiative ou retarder leur attaque en combat. Les créatures ayant raté leur sauvegarde perdent un tour complet sans agir et subissent un malus de -2 à leurs actions éventuelles de défense (parades ou esquives) durant ce tour."
            },

            // Niveau 7
            "Graines de feu": {
                level: 7,
                portée: "-",
                incantation: "7 s",
                durée: "1 h",
                sauvegarde: "-",
                zone: "-",
                description: "Lorsque ce sort est lancé, 10 petites billes se forment dans la main du magicien. Leur fine enveloppe est susceptible d'éclater lorsqu'elles heurtent quelque chose. L'énergie magique qu'elles renferment se libère alors enflammant les matières avec lesquelles elles sont en contact, et pouvant causer des brûlures (2 points de vie localisés).\nLe magicien peut bien sûr confier certaines de ces billes à ses compagnons. Leur utilisation la plus courante est de les lancer sur une cible pour l'enflammer ou la brûler. Elles servent notamment à enflammer les vêtements d'un adversaire, des buissons ou encore des caisses de bois dans un entrepôt."
            },
            "Sphère de feu": {
                level: 7,
                portée: "-",
                incantation: "5 s",
                durée: "1 h",
                sauvegarde: "-",
                zone: "sphère de 3m *",
                description: "Ce sort crée une sphère de flammes de 3 mètres de rayon et de 50 cm d'épaisseur centrée sur le magicien et qui le suit dans ses déplacements. La vitesse du magicien ne peut toutefois dépasser celle d'une marche normale, à défaut de quoi la sphère ne parvient plus avancer à sa vitesse et à le devancer.\nLa vision de cette sphère enflammée impressionnante dissuadera tous les animaux et la plupart des créatures intelligentes de tenter de la franchir. Seules les créatures particulièrement déterminées pourront s'y résoudre, et encore devront-elles réussir un jet sous leur Volonté avec un malus de -2 pour y parvenir. Le franchissement de la sphère leur inflige alors de sévères blessures (1d4+3 points de vie généraux).\nLe fait qu'une créature franchisse la sphère en perturbe momentanément la magie et a pour conséquence que la sphère reste immobile pendant 1 tour. Le magicien doit attendre que cette perturbation ait pris fin avant de pouvoir le cas échéant reprendre sa route (sauf à choisir de laisser la sphère derrière lui). En outre, la sphère se dissipe dès lors que 10 créatures l'ont traversée.\nCette sphère maintient une température constante de 30 degrés en son sein, et ce quel que soit son environnement. De plus, elle divise par 3 l'efficacité des sortilèges basés sur le froid qui la traversent. Elle enflamme les objets venant en contact avec elle."
            },

            // Niveau 8
            "Elémental de feu": {
                level: 8,
                portée: "2 m",
                incantation: "30 s",
                durée: "2 h",
                sauvegarde: "-",
                zone: "un feu",
                description: "Par ce sortilège, le magicien invoque pour l'aider une créature venant d'un autre plan d'existence. Il s'agit d'un être composé de gaz enflammés magiquement liés et denses au point d'acquérir une véritable consistance. Il sort du petit feu sur lequel le magicien a lancé le sort.\nL'élémental perçoit les ordres mentaux du magicien, pourvu que celui-ci se trouve à moins de 50 mètres, et il s'y conforme. Il est le plus souvent appelé pour aider le magicien lors d'un combat. Il est particulièrement puissant en attaque. Dès lors qu'un combat est engagé, l'élémental de feu le poursuit jusqu'au bout. Il n'écoutera des ordres de s'interrompre ou de changer de cible que si le magicien réussit un jet sous son propre Charisme.\nLe magicien peut également utiliser ce sort pour contrôler un élémental de feu qui a été invoqué ou le renvoyer dans son plan d'existence. Dans ce cas, l'incantation est réduite à seulement 5 secondes. L'élémental a droit à une sauvegarde sous respectivement PM+4 pour la prise de contrôle et PM pour le renvoi dans son plan d'origine.\nLes caractéristiques des élémentaux de feu sont décrites en annexe du présent livre de magie et plus en détail dans le chapitre « Les créatures surnaturelles » du livre du monde. Leur intelligence est équivalente à celle d'un enfant de quatre ou cinq ans. Ils ont un score de +9 en attaque, +5 en feinte de corps, +4 en esquive et infligent des dommages égaux à 2 x marge +1. Ils enflamment les matériaux avec lesquels ils ont un contact prolongé."
            },

            // Niveau 9
            "Être de feu": {
                level: 9,
                portée: "3 m",
                incantation: "1 min",
                durée: "4 h",
                sauvegarde: "-",
                zone: "brasier de 1m",
                description: "Ce sort permet au magicien de créer magiquement un être fait de flammes. Il ne s'agit pas d'invoquer une créature venant d'un autre plan d'existence, mais d'insuffler une vie temporaire à un feu (qui doit être au moins d'un mètre de rayon). La créature ainsi créée rentre donc dans la catégorie des créatures surnaturelles, mais pas dans celle des créatures invoquées venant d'un autre plan (cela vaut notamment pour le sortilège Repousser les créatures invoquées).\nLa créature sort du feu sur lequel le magicien a lancé le sortilège. Elle prend une forme vaguement humanoïde, même si les détails restent l'apanage du magicien. Elle mesure environ deux mètres cinquante de haut et possède une consistance physique réelle, contrairement à un feu. Elle pèse d'ailleurs une centaine de kilos.\nSes caractéristiques sont égales à celles d'un élémental de feu + 1 : elle a un score de +10 en attaque, +6 en feinte de corps et +5 en esquive. Elle inflige des dommages égaux à 2 x marge +1 (plafonné à 25). Elle possède 35 points de vie et 40 points de fatigue. Elle obéit mieux aux ordres du magicien et accepte par exemple de cesser le combat pour s'acquitter d'une autre tâche. Elle a une intelligence limitée et les ordres doivent rester relativement simples. En l'absence d'instructions elle suit le magicien et attaque toute personne semblant le menacer.\nLe magicien peut utiliser ce sort pour contrôler un être de feu. Dans ce cas, l'incantation est réduite à seulement 10 secondes. L'être a droit à une sauvegarde sous PM+4."
            },
            "Bouclier de feu": {
                level: 9,
                portée: "-",
                incantation: "4 s",
                durée: "15 min",
                sauvegarde: "-",
                zone: "le magicien",
                description: "Les effets de ce sortilège sont assez impressionnants : le magicien paraît véritablement s'immoler par le feu. De grandes flammes ardentes entourent son corps.\nLe magicien et son équipement sont parfaitement insensibles à leur chaleur. En revanche, toute créature approchant à moins d'un mètre de lui se voit infligée de sévères brûlures et perd 2 points de vie par tour. Cela est notamment valable pour toute créature combattant en mêlée le magicien.\nCe sort dissuadera tout animal normal d'attaquer le magicien."
            },

            // Niveau 10
            "Tempête de feu": {
                level: 10,
                portée: "20 m",
                incantation: "8 s",
                durée: "2 s",
                sauvegarde: "(Co-2)",
                zone: "boule de 20m",
                description: "Ce sortilège déclenche une véritable tempête de flammes, qui part du magicien et se répand dans la zone d'effet. Tous les animaux et les créatures faibles ou lâches s'enfuiront devant un tel déluge de feu, sauf circonstances exceptionnelles.\nCe déferlement brûle sévèrement toutes les créatures se trouvant en son sein : celles-ci perdent 2d4+1 points de vie. Les créatures en périphérie de la zone (à moins de 10 mètres de son bord) sont autorisées à un jet de sauvegarde, dont la marge de réussite vient le cas échéant en déduction des dommages subis.\nTout objet facilement inflammable à l'intérieur de la zone d'effets prend par ailleurs feu. Les objets se trouvant à moins de 10 cm d'une créature intelligente (notamment ses vêtements) ont toutefois une chance sur deux de résister à l'embrasement.\nEnfin, le choc de cette tempête de flammes provoque une hébétude parmi les créatures touchées. Celles-ci perdent un tour avant de pouvoir agir et subissent un malus de -2 à leurs éventuels jets de défense (parade ou esquive) si elles sont attaquées pendant ce laps de temps."
            },

            // Niveau 12
            "Contrôle des feux": {
                level: 12,
                portée: "-",
                incantation: "15 s",
                durée: "1 h",
                sauvegarde: "-",
                zone: "boule de 1km *",
                description: "Ce sort permet au magicien de prendre le contrôle de tous les feux naturels se trouvant dans la zone d'effets ou qui y sont allumés avant la fin du sort.\n« Prendre le contrôle » signifie que le magicien peut à volonté faire grandir ou diminuer ces feux (ou grandir certains et diminuer d'autres), dans les proportions qu'il veut pourvu qu'elles soient compatibles avec la quantité de combustible. Il peut même allumer un feu à partir de simples braises encore chaudes. Il peut ainsi par exemple éteindre complètement un feu, puis le rallumer après quelques minutes et le faire alors brûler si intensément qu'il consommera tout son combustible en quelques minutes à peine."
            },
            "Globe anti-feu": {
                level: 12,
                portée: "-",
                incantation: "3 s",
                durée: "3 h",
                sauvegarde: "-",
                zone: "boule de 5m *",
                description: "Ce sort crée une boule se déplaçant avec le magicien et le protégeant contre les effets du feu et de la chaleur. Les feux naturels situés à l'intérieur de cette boule s'éteignent et la température naturelle y est plafonnée à 25 degrés Celsius. Les sortilèges de la liste du Feu lancés par d'autres magiciens ne peuvent prendre effet dans cette boule (que ces magiciens soient eux-mêmes ou non à l'intérieur de la boule), même si cela ne les empêche pas de prendre effet à l'extérieur.\nCe bannissement de toute magie du Feu extérieure reste valable pour les sortilèges ayant une certaine durée et en cas de mouvement du magicien. Si par exemple celui-ci se déplace vers une Sphère de feu, la partie de celle-ci se trouvant à l'intérieur du globe anti-feu sera temporairement dissipée. Elle ne retrouvera ses effets que lorsque le magicien se sera éloigné et qu'elle se trouvera à nouveau hors du globe anti-feu.\nNotez enfin que le contact d'un globe anti-feu dissipe rapidement l'énergie des élémentaux de feu et des êtres de feu : ceux-ci perdent 5 points de vie par seconde passée en contact avec le globe. Cela est bien suffisant pour leur inspirer une crainte telle qu'ils ne s'en approchent jamais (ils en ressentent naturellement la présence)."
            },

            // Niveau 15
            "Nuée de météores": {
                level: 15,
                portée: "-",
                incantation: "8 s",
                durée: "2 tours",
                sauvegarde: "Co-var",
                zone: "cône de 30° x 40m (soit 10m de rayon à la base)",
                description: "Le magicien projette devant lui une vaste nuée de météores ardents. Ceux-ci filent à grande vitesse en zigzagant et en émettant un sifflement terrifiant. Ils parcourent environ quarante mètres avant de s'évanouir, formant ainsi un espace en forme approximative de cône.\nLes météores jaillissent des mains du magicien pendant 2 tours. Chacun mesure une cinquantaine de centimètres de diamètre et explose en une gerbe brûlante d'environ 1 mètre de rayon dès que sa course est arrêtée par quelque chose. Chaque créature victime de cette explosion se voit infliger des brûlures lui occasionnant la perte de 1d4 points de vie ; ses vêtements ont en outre 50 % de chance de s'enflammer.\nLes créatures présentes dans la zone d'effets sont touchées par les impacts d'un ou deux météores pour les plus éloignées et jusqu'à dix pour les plus proches du magicien :\n- moins de 10 mètres : 2d4+2 météores, sauvegarde Co-2\n- entre 10 et 20 mètres : 2d3+1 météores, sauvegarde Co-1\n- entre 20 et 30 mètres : 1d4+1 météores, sauvegarde Co\n- entre 30 et 40 mètres : 1d3 météores, sauvegarde Co+1\nLes créatures concernées peuvent tenter de réduire le nombre d'impacts en se jetant à terre ou sur le côté, ce qui les autorise à un jet de sauvegarde. La marge de réussite de celui-ci vient alors en déduction du nombre de météores les frappant (par exemple, une créature touchée normalement par 5 météores mais réussissant de 2 sa sauvegarde sera in fine frappée par 5-2 = 3 météores).\nUne créature décidant de réaliser une sauvegarde ne peut rien faire d'autre jusqu'à la fin du sort : elle consacre toute son attention et sa concentration à essayer d'éviter l'impact avec des météores. Une créature peut a contrario décider de continuer à agir pendant la nuée de météores ; elle doit toutefois pour cela réussir un jet sous sa Volonté moins 4 (la nuée est particulièrement terrifiante), n'effectue alors pas de sauvegarde contre le sort et subit un malus de -2 à toutes ses actions pour traduire la difficulté à se concentrer dans ce contexte.\nIl est possible d'accorder des bonus à la sauvegarde si les créatures peuvent s'abriter derrière des obstacles (muret, arbre, etc.) présents dans la zone d'effets.\nIl est important de ne pas occulter l'effet psychologique d'une nuée de météores : les effets de ce sort sont particulièrement impressionnants et provoqueront la peur voire la fuite des combattants au moral faible."
            }
        };

        // Fonction pour créer une flèche SVG entre deux éléments
        function createArrow(fromElement, toElement, svg) {
            const fromRect = fromElement.getBoundingClientRect();
            const toRect = toElement.getBoundingClientRect();
            const containerRect = document.getElementById('diagramContainer').getBoundingClientRect();

            // Calculer les positions relatives au conteneur avec plus de précision
            const fromX = fromRect.left + fromRect.width / 2 - containerRect.left;
            const fromY = fromRect.bottom - containerRect.top + 0;
            const toX = toRect.left + toRect.width / 2 - containerRect.left;
            const toY = toRect.top - containerRect.top - 0;

            // Vérifier que les positions sont valides
            if (isNaN(fromX) || isNaN(fromY) || isNaN(toX) || isNaN(toY)) {
                console.log('Position invalide pour la flèche');
                return;
            }

            // Créer la ligne SVG avec un style plus visible
            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            line.setAttribute('x1', fromX);
            line.setAttribute('y1', fromY);
            line.setAttribute('x2', toX);
            line.setAttribute('y2', toY);
            line.setAttribute('stroke', '#666');
            line.setAttribute('stroke-width', '2.5');
            line.setAttribute('marker-end', 'url(#arrowhead)');
            line.setAttribute('opacity', '0.75');

            svg.appendChild(line);
        }

        // Fonction pour créer toutes les flèches
        function createAllArrows() {
            // Attendre que les éléments soient rendus
            setTimeout(() => {
                // Supprimer l'ancien SVG
                const oldSvg = document.querySelector('.diagram-svg');
                if (oldSvg) {
                    oldSvg.remove();
                }

                // Vérifier que tous les éléments existent
                const allElements = document.querySelectorAll('.spell-node');
                console.log(`Éléments trouvés: ${allElements.length}`);

                if (allElements.length === 0) {
                    console.log('Éléments non trouvés, nouvelle tentative...');
                    setTimeout(createAllArrows, 500);
                    return;
                }

                // Vérifier que le conteneur existe
                const container = document.getElementById('diagramContainer');
                if (!container) {
                    console.log('Conteneur non trouvé');
                    return;
                }

                // Créer le SVG
                const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                svg.className = 'diagram-svg';
                svg.setAttribute('width', "100%");
                svg.setAttribute('height', "100%");
                svg.style.position = 'absolute';
                svg.style.top = '0';
                svg.style.left = '0';
                svg.style.zIndex = '0';

                // Créer le marqueur de flèche
                const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
                const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');
                marker.setAttribute('id', 'arrowhead');
                marker.setAttribute('markerWidth', '6');
                marker.setAttribute('markerHeight', '4');
                marker.setAttribute('refX', '5');
                marker.setAttribute('refY', '2');
                marker.setAttribute('orient', 'auto');

                const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
                polygon.setAttribute('points', '0 0, 6 2, 0 4');
                polygon.setAttribute('fill', '#666');
                polygon.setAttribute('opacity', '0.8');

                marker.appendChild(polygon);
                defs.appendChild(marker);
                svg.appendChild(defs);

                // Créer les connexions selon le diagramme de la Liste du Feu
                const connections = [
                    // Chaîne de base : chaleur et température
                    ["Chauffer", "Altération des feux"],
                    ["Chauffer", "Mains brûlantes"],
                    ["Chauffer", "Colère"],
                    ["Chauffer", "Rideau de feu"],
                    ["Altération des feux", "Ebullition des liquides"],
                    ["Altération des feux", "Ignition"],
                    ["Altération des feux", "Pyrotechnie"],
                    ["Ebullition des liquides", "Echauffement des solides"],
                    ["Echauffement des solides", "Métal brûlant"],
                    ["Pyrotechnie", "Feu charmeur"],
                    ["Feu charmeur", "Extinction"],
                    ["Extinction", "Elémental de feu"],
                    ["Extinction", "Contrôle des feux"],
                    ["Elémental de feu", "Être de feu"],
                    ["Ignition", "Flamme"],
                    ["Mains brûlantes", "Flèches de feu"],
                    ["Flèches de feu", "Flamme"],
                    ["Flèches de feu", "Epée de feu"],
                    ["Flamme", "Eclair de feu"],
                    ["Eclair de feu", "Boule de feu"],
                    ["Boule de feu", "Graines de feu"],
                    ["Graines de feu", "Tempête de feu"],
                    ["Tempête de feu", "Nuée de météores"],
                    ["Colère", "Frénésie"],
                    ["Rideau de feu", "Piège à feu"],
                    ["Rideau de feu", "Résistance au feu"],
                    ["Résistance au feu", "Sphère de feu"],
                    ["Sphère de feu", "Bouclier de feu"],
                    ["Bouclier de feu", "Globe anti-feu"],

                ];

                let createdArrows = 0;
                connections.forEach(([from, to]) => {
                    const fromElement = document.querySelector(`[data-spell="${from}"]`);
                    const toElement = document.querySelector(`[data-spell="${to}"]`);

                    if (fromElement && toElement) {
                        console.log(`Création flèche: ${from} -> ${to}`);
                        createArrow(fromElement, toElement, svg);
                        createdArrows++;
                    } else {
                        console.log(`Éléments non trouvés: ${from} -> ${to}`);
                        console.log(`From: ${fromElement ? 'trouvé' : 'non trouvé'}, To: ${toElement ? 'trouvé' : 'non trouvé'}`);
                    }
                });

                // Ajouter le SVG au conteneur
                document.getElementById('diagramContainer').appendChild(svg);

                console.log(`Flèches créées: ${createdArrows}/${connections.length}`);
                console.log(`Position SVG: top=0, left=0, z-index=10`);
            }, 500);
        }

        // Créer les flèches au chargement de la page
        window.addEventListener('load', createAllArrows);

        // Gestion des clics sur les sorts
        document.addEventListener('click', function (e) {
            if (e.target.classList.contains('spell-node')) {
                const spellName = e.target.dataset.spell;
                const spellData = spellsData[spellName];

                if (spellData) {
                    // Afficher les informations du sort
                    document.getElementById('spellName').textContent = spellName;
                    document.getElementById('spellDescription').textContent = spellData.description;
                    document.getElementById('spellLevel').textContent = spellData.level;
                    document.getElementById('spellInfo').style.display = 'block';
                    document.getElementById('spellPortée').textContent = spellData.portée;
                    document.getElementById('spellIncantation').textContent = spellData.incantation;
                    document.getElementById('spellDurée').textContent = spellData.durée;
                    document.getElementById('spellSauvegarde').textContent = spellData.sauvegarde;
                    document.getElementById('spellZone').textContent = spellData.zone;

                    // Animation du sort cliqué
                    e.target.classList.add('clicked');
                    setTimeout(() => {
                        e.target.classList.remove('clicked');
                    }, 1000);
                }
            }
        });

        // Fermer les informations en cliquant ailleurs
        document.addEventListener('click', function (e) {
            if (!e.target.classList.contains('spell-node') && !e.target.closest('.spell-info')) {
                document.getElementById('spellInfo').style.display = 'none';
            }
        });
    </script>
</body>

</html>